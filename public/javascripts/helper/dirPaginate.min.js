(function(){var n;try{n=angular.module("angularUtils.directives.dirPagination")}catch(u){n=angular.module("angularUtils.directives.dirPagination",[])}n.directive("dirPaginate",["$compile","$parse","paginationService",function(b,h,c){function d(a,b){var c=!!a.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);return"__default"===b||c?a:a.replace(/(\|\s*itemsPerPage\s*:[^|]*)/,"$1 : '"+b+"'")}function a(a,b,c){a[0].hasAttribute("dir-paginate-start")||a[0].hasAttribute("data-dir-paginate-start")?(b.$set("ngRepeatStart",
c),a.eq(a.length-1).attr("ng-repeat-end",!0)):b.$set("ngRepeat",c)}function l(a){angular.forEach(a,function(a){a.nodeType===Node.ELEMENT_NODE&&angular.element(a).attr("dir-paginate-no-compile",!0)})}function p(a){angular.forEach(a,function(a){a.nodeType===Node.ELEMENT_NODE&&angular.element(a).removeAttr("dir-paginate-no-compile")});a.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate");a.eq(a.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end")}
function t(a,b,c){b.currentPage?a=h(b.currentPage):(b=c+"__currentPage",a[b]=1,a=h(b));return a}return{terminal:!0,multiElement:!0,compile:function(k,m){var g=m.dirPaginate,e=g.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),f=/\|\s*itemsPerPage\s*:[^|]*/;if(null===e[2].match(f))throw"pagination directive: the 'itemsPerPage' filter must be set.";var e=e[2].replace(f,""),q=h(e);l(k);c.registerInstance(m.paginationId||"__default");return function(f,e,l){var k=h(l.paginationId)(f)||
l.paginationId||"__default";c.registerInstance(k);var m=d(g,k);a(e,l,m);p(e);e=b(e);m=t(f,l,k);c.setCurrentPageParser(k,m,f);"undefined"!==typeof l.totalItems?(c.setAsyncModeTrue(k),f.$watch(function(){return h(l.totalItems)(f)},function(a){0<=a&&c.setCollectionLength(k,a)})):f.$watchCollection(function(){return q(f)},function(a){a&&c.setCollectionLength(k,a.length)});e(f)}}}}]).directive("dirPaginateNoCompile",function(){return{priority:5E3,terminal:!0}}).directive("dirPaginationControls",["paginationService",
"paginationTemplate",function(b,h){function c(a,b,c,d){var h=[];b=Math.ceil(b/c);c=Math.ceil(d/2);c=a<=c?"start":b-c<a?"end":"middle";for(var m=d<b,g=1;g<=b&&g<=d;){var e;e=g;var f=a,q=d,r=b,n=Math.ceil(q/2);e=e===q?r:1===e?e:q<r?r-n<f?r-q+e:n<f?f-n+e:e:e;f=2===g&&("middle"===c||"end"===c);q=g===d-1&&("middle"===c||"start"===c);m&&(f||q)?h.push("..."):h.push(e);g++}return h}var d=/^\d+$/;return{restrict:"AE",templateUrl:function(a,b){return b.templateUrl||h.getPath()},scope:{maxSize:"=?",onPageChange:"&?",
paginationId:"=?"},link:function(a,h,p){function n(f){if(m(f)&&(a.pages=c(f,b.getCollectionLength(g),b.getItemsPerPage(g),e),a.pagination.current=f,k(),a.onPageChange))a.onPageChange({newPageNumber:f})}function k(){var c=b.getCurrentPage(g),d=b.getItemsPerPage(g),e=b.getCollectionLength(g);a.range.lower=(c-1)*d+1;a.range.upper=Math.min(c*d,e);a.range.total=e}function m(b){return d.test(b)&&0<b&&b<=a.pagination.last}h=p.paginationId||"__default";var g=a.paginationId||p.paginationId||"__default";if(!b.isRegistered(g)&&
!b.isRegistered(h))throw"pagination directive: the pagination controls"+("__default"!==g?" (id: "+g+") ":" ")+"cannot be used without the corresponding pagination directive.";a.maxSize||(a.maxSize=9);a.directionLinks=angular.isDefined(p.directionLinks)?a.$parent.$eval(p.directionLinks):!0;a.boundaryLinks=angular.isDefined(p.boundaryLinks)?a.$parent.$eval(p.boundaryLinks):!1;var e=Math.max(a.maxSize,5);a.pages=[];a.pagination={last:1,current:1};a.range={lower:1,upper:1,total:1};a.$watch(function(){return(b.getCollectionLength(g)+
1)*b.getItemsPerPage(g)},function(f){0<f&&(f=parseInt(b.getCurrentPage(g))||1,a.pages=c(f,b.getCollectionLength(g),b.getItemsPerPage(g),e),a.pagination.current=f,a.pagination.last=a.pages[a.pages.length-1],a.pagination.last<a.pagination.current?a.setCurrent(a.pagination.last):k())});a.$watch(function(){return b.getItemsPerPage(g)},function(b,c){b!=c&&"undefined"!==typeof c&&n(a.pagination.current)});a.$watch(function(){return b.getCurrentPage(g)},function(a,b){a!=b&&n(a)});a.setCurrent=function(a){m(a)&&
(a=parseInt(a,10),b.setCurrentPage(g,a))}}}}]).filter("itemsPerPage",["paginationService",function(b){return function(h,c,d){"undefined"===typeof d&&(d="__default");if(!b.isRegistered(d))throw"pagination directive: the itemsPerPage id argument (id: "+d+") does not match a registered pagination-id.";var a,l;return h instanceof Array?(c=parseInt(c)||9999999999,l=b.isAsyncMode(d)?0:(b.getCurrentPage(d)-1)*c,a=l+c,b.setItemsPerPage(d,c),h.slice(l,a)):h}}]).service("paginationService",function(){var b=
{},h;this.registerInstance=function(c){"undefined"===typeof b[c]&&(b[c]={asyncMode:!1},h=c)};this.isRegistered=function(c){return"undefined"!==typeof b[c]};this.getLastInstanceId=function(){return h};this.setCurrentPageParser=function(c,d,a){b[c].currentPageParser=d;b[c].context=a};this.setCurrentPage=function(c,d){b[c].currentPageParser.assign(b[c].context,d)};this.getCurrentPage=function(c){var d=b[c].currentPageParser;return d?d(b[c].context):1};this.setItemsPerPage=function(c,d){b[c].itemsPerPage=
d};this.getItemsPerPage=function(c){return b[c].itemsPerPage};this.setCollectionLength=function(c,d){b[c].collectionLength=d};this.getCollectionLength=function(c){return b[c].collectionLength};this.setAsyncModeTrue=function(c){b[c].asyncMode=!0};this.isAsyncMode=function(c){return b[c].asyncMode}}).provider("paginationTemplate",function(){var b="angularUtils.directives.dirPagination.template";this.setPath=function(h){b=h};this.$get=function(){return{getPath:function(){return b}}}}).run(["$templateCache",
function(b){b.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by $index" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}])})();