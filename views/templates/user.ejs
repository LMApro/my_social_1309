<h3>Posts of <span ng-if="username!==currentUser()">{{username}}</span><span ng-if="username===currentUser()">you</span></h3>
<hr>
<p ng-if="posts.length==0">Nothing to show.</p>
<div ng-show="editing.current[1]">
	<textarea class="form-control" rows="{{post.title.length/80}}" ng-model="title"></textarea>
	<br>
	<div class="input-group">
		<input class="form-control" type="text" placeholder="Link" ng-model="link">
		<span class="input-group-btn">
			<button class="btn btn-primary" ng-click="save()">Save</button>
			<button class="btn btn-default" ng-click="reset()">Cancel</button>
		</span>
	</div>
	<br>
</div>
<div ng-if="posts.length>0" ng-repeat="post in posts | orderBy: '-points'" class="post text-primary" ng-mouseover="post.canEditAndDelete=true" ng-mouseleave="post.canEditAndDelete=false" >
	<p ng-hide="editing.current[0]._id===post._id && editing.current[1]">
		<a ng-href="{{post.link | link}}" ng-show="post.link" class="text-primary post" target="_blank">
			{{post.title}}
		</a>
		<span ng-hide="post.link" class="text-only">{{post.title}}</span>
		&nbsp;
	</p>
	
	<p ng-hide="editing.current[0]._id===post._id && editing.current[1]">
		<span class="small">
			<span class="text-muted">by</span> 
			<span ng-if="post.author!==currentUser()" class="small"><a ng-href="/#/users/{{post.author}}">{{post.author}}</a></span>
			<span ng-if="post.author===currentUser()" class="small"><a ng-href="/#/users/{{currentUser()}}">you</a></span>
		</span>
		<span class="text-muted small">at {{post.date | date: 'HH:mm - MMM dd, yyyy'}}</span>
	</p>
	<p>
		<span class="glyphicon glyphicon-thumbs-up" ng-class="{voted:isUpvoted(post)}" ng-click="like(post)"></span>
			{{post.usersLiked.length}} &nbsp;
		<span class="glyphicon glyphicon-thumbs-down" ng-class="{voted:isDownvoted(post)}" ng-click="dislike(post)"></span>
			{{post.usersDisliked.length}} &nbsp;
		<a href="#/posts/{{post._id}}" class="text-primary">
			<span ng-if="post.comments.length==0">Be the first to comment</span>
			<span ng-if="post.comments.length==1">1 comment</span>
			<span ng-if="post.comments.length>1">{{ post.comments.length + ' comments' }}</span>
		</a>
		<span class="pull-right small" ng-if="post.canEditAndDelete && post.author === currentUser()">
			<a href="" ng-click="edit(post)">Edit</a> &nbsp;&nbsp; <a href="" ng-click="delete(post)">Delete</a>
		</span>
	</p>
	<hr>
</div>


